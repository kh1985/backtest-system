# 要求整理: Prism

## 解決したい問題

**「元手を増やすための高速回転トレード（スキャルピング〜デイトレ）で勝てるパターンを、AIの力で自動的に見つけたい」**

- 手作業での戦略検証は時間がかかり再現性がない
- パラメータの組み合わせが膨大（テンプレート×パラメータ×レジーム＝数千通り）で手動では無理
- バックテスト結果が過学習か本物のエッジか区別できない
- 市場環境（上昇/下降/レンジ）で有効な戦略が変わる
- 1銘柄でしか効かない戦略を「汎用的」と誤認するリスク

## 誰が・どう使うか

- **利用者**: 仮想通貨トレーダー（個人）。元手を増やすのが目的
- **トレードスタイル**: スキャルピング〜デイトレード。1日1回以上の高速回転
- **操作**: CLI中心。データ取得→最適化→結果確認。Web UIの位置づけは未確定
- **開発**: Claude Code Maxプランで開発委任

## コアユースケース

```
入力:   Binanceからダウンロードした複数TF(1m/15m/1h/4h)のOHLCVデータ
処理:   データセットパターン × トレンド識別戦略 × インジケーター × パラメータ × 決済ルール
        の全組み合わせをプログラムが自動検証
出力:   レジーム別の最適戦略ランキング（勝率・PF・Sharpe・DD付き）
判定:   1日1回以上のトレード頻度を満たし、統計的に有意な勝ちパターン
```

## 優先度（MoSCoW）

### Must
- OHLCVデータ読み込み（Binance CSV/ZIP）
- バックテストエンジン（bar-by-bar、先読みなし、TP/SL/トレーリング/タイムアウト）
- グリッドサーチ自動最適化（全テンプレート×パラメータ×レジーム）
- トレンドレジーム検出（上位TFから判定）
- 結果のJSON保存・再読込

### Should
- 過学習警告（PF>2.0/Sharpe>3.0/トレード数<30）
- ウォークフォワード分析
- 複数銘柄バッチ最適化+コンセンサス分析
- Numba JIT高速化

### Won't for now
- CPCV（統計的過学習検出）
- モンテカルロシミュレーション
- リアルタイムデータ取得・ペーパートレード
- ML/DRLベースの戦略自動生成

## 未確定（TBD）

| # | 項目 | 重要度 |
|---|------|--------|
| 1 | Web UI/UXの方針 — CLIで自動検証が本質なら、UIは何に使うか | 高 |
| 2 | OOS検証のデータ分割比率（Train/Val/Test） | 高 |
| 3 | フォワードテスト機能の実装方針 | 高 |
| 4 | 最低トレード数フィルタの閾値（現状30、推奨100+） | 中 |

---
Version: v2.0（20260203）
